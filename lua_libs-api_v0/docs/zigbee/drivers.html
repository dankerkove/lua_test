
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Zigbee driver sturctures &#8212; SmartThings Lua Libraries  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Zigbee Driver RX message handlers" href="rx_handlers.html" />
    <link rel="prev" title="Zigbee related libraries" href="zigbee.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="zigbee-driver-sturctures">
<h1>Zigbee driver sturctures<a class="headerlink" href="#zigbee-driver-sturctures" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ZigbeeDriver">
<em class="property">class </em><code class="descname">ZigbeeDriver</code><a class="headerlink" href="#ZigbeeDriver" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ZigbeeDriver.zigbee_message_handler">
<em class="property"> </em><code class="descname">zigbee_message_handler</code><span class="sig-paren">(</span><em>self</em>, <em>message_channel</em><span class="sig-paren">)</span><a class="headerlink" href="#ZigbeeDriver.zigbee_message_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler function for the raw zigbee channel message receive</p>
<p>This will be the default registered handler for the Zigbee message_channel receive callback.  It will parse the
raw serialized message into a ZigbeeMessageRx and then use the zigbee_message_dispatcher to find a handler that
can deal with it.</p>
<p>Handlers have various levels of specificity.  Global handlers are for global ZCL commands, and are specified with a
cluster, then command ID.  Cluster handlers are for cluster specific commands and are again defined by cluster, then
command id.  Attr handlers are used for an attribute report, or read response for a specific cluster, attribute ID.
and finally zdo handlers are for ZDO commands and are defined by the “cluster” of the command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>self</strong> (<a class="reference internal" href="../drivers.html#Driver" title="Driver"><em>Driver</em></a>) – the driver context</li>
<li><strong>message_channel</strong> (<em>message_channel</em>) – the Zigbee message_channel with a message ready to be read</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ZigbeeDriver.device_added">
<em class="property"> </em><code class="descname">device_added</code><span class="sig-paren">(</span><em>self</em>, <em>device</em><span class="sig-paren">)</span><a class="headerlink" href="#ZigbeeDriver.device_added" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the necessary setup for device add</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>self</strong> (<a class="reference internal" href="../drivers.html#Driver" title="Driver"><em>Driver</em></a>) – the driver context</li>
<li><strong>device</strong> (<a class="reference internal" href="../drivers.html#Device" title="Device"><em>Device</em></a>) – the device added</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ZigbeeDriver.populate_zigbee_dispatcher_from_sub_drivers">
<em class="property">static </em><code class="descname">populate_zigbee_dispatcher_from_sub_drivers</code><span class="sig-paren">(</span><em>driver</em><span class="sig-paren">)</span><a class="headerlink" href="#ZigbeeDriver.populate_zigbee_dispatcher_from_sub_drivers" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a number of child handlers that override the top level driver behavior</p>
<p>Each handler set can contain a <cite>handlers</cite> field that follow exactly the same
pattern as the base driver format. It must also contain a
<cite>zigbee_can_handle(driver, device, zb_rx)</cite> function that returns true if the
corresponding handlers should be considered.</p>
<p>This will recursively follow the <cite>sub_drivers</cite> and build a structure that will
correctly find and execute a handler that matches.  It should be noted that a child handler
will always be preferred over a handler at the same level, but that if multiple child
handlers report that they can handle a message, it will be sent to each handler that reports
it can handle the message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>driver</strong> (<a class="reference internal" href="../drivers.html#Driver" title="Driver"><em>Driver</em></a>) – the executing zigbee driver (or sub handler set)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">SmartThings Lua Libraries</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lua_environment.html">Lua Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">Utils Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="zigbee.html">Zigbee related libraries</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Zigbee driver sturctures</a></li>
<li class="toctree-l2"><a class="reference internal" href="rx_handlers.html">Zigbee Driver RX message handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="tx_handlers.html">Zigbee Driver Capability Command Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="messages.html">Zigbee Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_types.html">Zigbee Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="zcl/zcl_commands.html">ZCL Global Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="zdo/zdo_commands.html">ZDO Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="zcl/zcl_clusters.html">ZCL Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated.html">Generated Zigbee Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver_tests.html">Driver Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastore.html">Datastore</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="zigbee.html">Zigbee related libraries</a><ul>
      <li>Previous: <a href="zigbee.html" title="previous chapter">Zigbee related libraries</a></li>
      <li>Next: <a href="rx_handlers.html" title="next chapter">Zigbee Driver RX message handlers</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, SmartThings Developers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/zigbee/drivers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>